<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Model Viewer</title>
    <style>
        body { 
            margin: 0; 
            height: 300vh; 
            
            /* Temporary background. Remove it!!! */
    
    background-image: url('bg.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
   background-attachment: fixed;
            
            overflow-x: hidden; 
        }
        
        canvas { 
            display: block; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%;
            height: 100%;
            z-index: 10; 
            outline: none;
            pointer-events: none; 
        }
    </style>
    
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
</head>
<body>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

         const CONFIG = {
            camera: { x: 1.134, y: 1.083, z: 8.512 },
            model: {
                offsetY: 0,
                rotationY: 0,
                scrollSpeed: 0.0044 
            },
            ambient: { intensity: 0.2 },
            lights: [
                { // Light 1
                    color: 0x24ffe5,
                    intensity: 5, decay: 1, distance: 0,
                    pos: { x: -2, y: 0, z: 2.9 }
                },
                { // Light 2
                    color: 0x24ffa7,
                    intensity: 10, decay: 1.255, distance: 0,
                    pos: { x: 1, y: 2.1, z: -1.2 }
                },
                { // Light 3
                    color: 0x24ffa7,
                    intensity: 10, decay: 3, distance: 0,
                    pos: { x: 0, y: 2.7, z: 0 }
                }
            ]
        };

        const scene = new THREE.Scene();
        
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.physicallyCorrectLights = true; 
        renderer.toneMapping = THREE.ACESFilmicToneMapping; 
        renderer.toneMappingExposure = 1.0; 
        document.body.appendChild(renderer.domElement);

        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(CONFIG.camera.x, CONFIG.camera.y, CONFIG.camera.z);
        camera.lookAt(0, 0, 0);

        const ambientLight = new THREE.AmbientLight(0xffffff, CONFIG.ambient.intensity);
        scene.add(ambientLight);

        CONFIG.lights.forEach(lData => {
            const light = new THREE.PointLight(0xffffff, lData.intensity);
            light.position.set(lData.pos.x, lData.pos.y, lData.pos.z);
            light.decay = lData.decay;
            light.distance = lData.distance;
            scene.add(light);
        });

        const loader = new GLTFLoader();
        let loadedModel = null; 

        loader.load('logo.glb', function (gltf) {
            loadedModel = gltf.scene;

            const box = new THREE.Box3().setFromObject(loadedModel);
            const center = box.getCenter(new THREE.Vector3());
            
            loadedModel.position.x -= center.x;
            loadedModel.position.z -= center.z;
            loadedModel.position.y -= center.y;

            loadedModel.position.y += CONFIG.model.offsetY;
            loadedModel.rotation.y = CONFIG.model.rotationY;

            scene.add(loadedModel);

        }, undefined, function (error) {
            console.error(error);
        });

        function onScroll() {
            if (loadedModel) {
                const scrollY = window.scrollY;
                loadedModel.rotation.y = CONFIG.model.rotationY + (scrollY * CONFIG.model.scrollSpeed);
            }
        }
        window.addEventListener('scroll', onScroll);

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>